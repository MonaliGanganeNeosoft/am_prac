{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Neosoft\\\\Desktop\\\\amruta\\\\Neostore_Ecommerce_Website\\\\neostore-app\\\\src\\\\Components\\\\ChangePassword.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Footer from './Footer';\nimport Paper from '@mui/material/Paper';\nimport { Link, Navigate, useNavigate } from 'react-router-dom';\nimport bcrypt from 'bcryptjs';\nimport { Row, Col, Container, Form, Button } from 'react-bootstrap';\nimport sweet from 'sweetalert2';\nimport jwt_decode from 'jwt-decode';\nimport Account from './Account';\nimport { changePass, updatePassword } from '../configFiles/services';\nimport { useDispatch } from 'react-redux';\nimport { Alert } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst paperStyle = {\n  height: '70vh',\n  width: 600,\n  margin: '30px auto',\n  paddingTop: '20px'\n};\nconst regForPass = RegExp(/(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\\W)/);\n\nfunction ChangePassword() {\n  _s();\n\n  const [eye, seteye] = useState(true);\n  const [newEye, setNewEye] = useState(true);\n  const [confirmEye, setConfirmEye] = useState(true);\n  const [password, setpassword] = useState(\"password\");\n  const [newPass, setNewPass] = useState(\"password\");\n  const [confirmPass, setConfirmPass] = useState(\"password\");\n  const [flag, setFlag] = useState(false);\n  const [data, setData] = useState();\n  const [dataPass, setDataPass] = useState({\n    oldPass: '',\n    newPass: '',\n    confirmPass: ''\n  });\n  const [show, setShow] = useState(false);\n  const [error, setError] = useState({\n    oldPass: '',\n    newPass: '',\n    confirmPass: ''\n  });\n  const navigate = useNavigate();\n  const [user, setUser] = useState([]);\n  const [values, setValues] = useState({\n    password: '',\n    cpassword: ''\n  });\n  const pass = useRef(null);\n  const confirmPassword = useRef(null);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!localStorage.getItem(\"_token\")) {\n      navigate('/login');\n      window.location.reload();\n    }\n\n    dispatch({\n      type: \"cartLen\"\n    });\n\n    if (localStorage.getItem('_token') !== undefined) {\n      let token = localStorage.getItem('_token');\n      let decode = jwt_decode(token);\n      console.log(decode);\n      setData(decode);\n    }\n  }, []);\n  useEffect(() => {\n    let user = JSON.parse(localStorage.getItem('userData'));\n    setUser(user);\n  }, []);\n\n  const changeIt = event => {\n    const {\n      name,\n      value\n    } = event.target;\n\n    switch (name) {\n      case 'oldPass':\n        console.log(value + \"\" + data.password);\n        error.oldPass = !bcrypt.compareSync(value, data.password) ? 'old password should match' : '';\n        break;\n\n      case 'newPass':\n        error.newPass = regForPass.test(value) ? '' : 'Password must be between 6 to 16 characters and must contain one number and one special character';\n        break;\n\n      case 'confirmPass':\n        error.confirmPass = dataPass.newPass != value ? 'password and confirm password should match' : '';\n        break;\n    }\n\n    setDataPass({ ...dataPass,\n      [name]: value\n    });\n    console.log(dataPass);\n  };\n\n  const Eye = () => {\n    if (password == \"password\") {\n      setpassword(\"text\");\n      seteye(false);\n    } else {\n      setpassword(\"password\");\n      seteye(true);\n    }\n  };\n\n  const newEyes = () => {\n    if (newPass == \"password\") {\n      setNewPass(\"text\");\n      setNewEye(false);\n    } else {\n      setNewPass(\"password\");\n      setNewEye(true);\n    }\n  };\n\n  const confirmEyes = () => {\n    if (confirmPass == \"password\") {\n      setConfirmPass(\"text\");\n      setConfirmEye(false);\n    } else {\n      setConfirmPass(\"password\");\n      setConfirmEye(true);\n    }\n  };\n\n  const submitPassword = e => {\n    if (data.password == undefined) {\n      sweet.fire({\n        title: 'you do not have old password',\n        icon: \"warning\",\n        timer: 2000\n      });\n    } else if (dataPass.oldPass == '' || dataPass.newPass == '' || dataPass.confirmPass == '') {\n      setShow(true);\n      setTimeout(() => {\n        setShow(false);\n      }, 3000);\n    } else if (bcrypt.compareSync(dataPass.oldPass, data.password) && error.oldPass == '' && error.newPass == '' && error.confirmPass == '') {\n      sweet.fire({\n        title: `Your Password has been changed please login now`,\n        icon: \"success\",\n        timer: 3000\n      });\n      const saltRounds = 10;\n      const salt = bcrypt.genSaltSync(saltRounds);\n      const hash = bcrypt.hashSync(dataPass.newPass, salt);\n      console.log(JSON.parse(localStorage.getItem(\"cartData\")));\n      changePass({\n        newPass: hash,\n        id: data.id,\n        cartData: JSON.parse(localStorage.getItem(\"cartData\"))\n      });\n      localStorage.clear();\n      navigate('/login');\n      dispatch({\n        type: \"logout\"\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"My Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [show == true && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        className: \"fw-bold\",\n        style: {\n          fontSize: \"25px\"\n        },\n        children: \"All Fields are Required!!!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          sm: 6,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container m-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(Account, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          sm: 6,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 5,\n            style: paperStyle,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"Change Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    controlId: \"exampleForm.ControlInput2\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: password,\n                      placeholder: \" Old Password\",\n                      onChange: changeIt,\n                      name: \"oldPass\",\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 185,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"placeIconEye\",\n                      style: {\n                        cursor: \"pointer\"\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        onClick: Eye,\n                        className: `fa ${eye ? \"fa-eye-slash\" : \"fa-eye\"}`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 187,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-danger\",\n                      children: error.oldPass\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 189,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    controlId: \"exampleForm.ControlInput2\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: newPass,\n                      placeholder: \"New Password\",\n                      onChange: changeIt,\n                      name: \"newPass\",\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 192,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"placeIconEye\",\n                      style: {\n                        cursor: \"pointer\"\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        onClick: newEyes,\n                        className: `fa ${newEye ? \"fa-eye-slash\" : \"fa-eye\"}`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 194,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 193,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-danger\",\n                      children: error.newPass\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 196,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    controlId: \"exampleForm.ControlInput2\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: confirmPass,\n                      placeholder: \"Confirm Password\",\n                      onChange: changeIt,\n                      name: \"confirmPass\",\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 199,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"placeIconEye\",\n                      style: {\n                        cursor: \"pointer\"\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        onClick: confirmEyes,\n                        className: `fa ${confirmEye ? \"fa-eye-slash\" : \"fa-eye\"}`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 201,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 200,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-danger\",\n                      children: error.confirmPass\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    className: \"text-black\",\n                    style: {\n                      width: \"35%\",\n                      backgroundColor: \"grey\",\n                      border: \"none\"\n                    },\n                    onClick: submitPassword,\n                    children: \"Change Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ChangePassword, \"Ut67Y39ekPrY5eQk9m9LBqXj+Vw=\", false, function () {\n  return [useNavigate, useDispatch];\n});\n\n_c = ChangePassword;\nexport default ChangePassword;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChangePassword\");","map":{"version":3,"sources":["C:/Users/Neosoft/Desktop/amruta/Neostore_Ecommerce_Website/neostore-app/src/Components/ChangePassword.js"],"names":["React","useState","useEffect","useRef","Footer","Paper","Link","Navigate","useNavigate","bcrypt","Row","Col","Container","Form","Button","sweet","jwt_decode","Account","changePass","updatePassword","useDispatch","Alert","paperStyle","height","width","margin","paddingTop","regForPass","RegExp","ChangePassword","eye","seteye","newEye","setNewEye","confirmEye","setConfirmEye","password","setpassword","newPass","setNewPass","confirmPass","setConfirmPass","flag","setFlag","data","setData","dataPass","setDataPass","oldPass","show","setShow","error","setError","navigate","user","setUser","values","setValues","cpassword","pass","confirmPassword","dispatch","localStorage","getItem","window","location","reload","type","undefined","token","decode","console","log","JSON","parse","changeIt","event","name","value","target","compareSync","test","Eye","newEyes","confirmEyes","submitPassword","e","fire","title","icon","timer","setTimeout","saltRounds","salt","genSaltSync","hash","hashSync","id","cartData","clear","fontSize","cursor","backgroundColor","border"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\r\nimport Footer from './Footer'\r\nimport Paper from '@mui/material/Paper';\r\nimport { Link, Navigate, useNavigate } from 'react-router-dom';\r\nimport bcrypt from 'bcryptjs'\r\nimport { Row, Col, Container, Form, Button } from 'react-bootstrap'\r\nimport sweet from 'sweetalert2'\r\nimport jwt_decode from 'jwt-decode'\r\nimport Account from './Account';\r\nimport { changePass, updatePassword } from '../configFiles/services';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Alert } from '@mui/material';\r\nconst paperStyle = { height: '70vh', width: 600, margin: '30px auto', paddingTop: '20px' }\r\nconst regForPass = RegExp(/(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\\W)/);\r\nfunction ChangePassword() {\r\n\r\n    const [eye, seteye] = useState(true);\r\n    const [newEye, setNewEye] = useState(true);\r\n    const [confirmEye, setConfirmEye] = useState(true);\r\n    const [password, setpassword] = useState(\"password\");\r\n    const [newPass, setNewPass] = useState(\"password\");\r\n    const [confirmPass, setConfirmPass] = useState(\"password\");\r\n    const [flag, setFlag] = useState(false)\r\n    const [data, setData] = useState();\r\n    const [dataPass, setDataPass] = useState({\r\n        oldPass:'',\r\n        newPass:'',\r\n        confirmPass:''\r\n    });\r\n    const[show,setShow]=useState(false)\r\n    const[error,setError]=useState({\r\n        oldPass:'',\r\n        newPass:'',\r\n        confirmPass:''\r\n    })\r\n    const navigate = useNavigate()\r\n    const [user, setUser] = useState([])\r\n    const [values, setValues] = useState({\r\n        password: '',\r\n        cpassword: '',\r\n    })\r\n\r\n    const pass = useRef(null);\r\n    const confirmPassword = useRef(null);\r\n    const dispatch=useDispatch()\r\n    useEffect(() => {\r\n        if(!localStorage.getItem(\"_token\")){\r\n            navigate('/login')\r\n            window.location.reload()\r\n        }\r\n        dispatch({type:\"cartLen\"})\r\n        if (localStorage.getItem('_token') !== undefined) {\r\n            let token = localStorage.getItem('_token');\r\n            let decode = jwt_decode(token);\r\n            console.log(decode)\r\n            setData(decode)\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        let user = JSON.parse(localStorage.getItem('userData'));\r\n        setUser(user)\r\n    }, [])\r\n  \r\n    const changeIt = (event) => {\r\n        const { name, value } = event.target;\r\n        switch (name) {\r\n            case 'oldPass':\r\n                console.log(value+\"\"+data.password)\r\n                error.oldPass =!bcrypt.compareSync(value, data.password) ? 'old password should match' : '';\r\n                break;\r\n            case 'newPass':\r\n                error.newPass = regForPass.test(value) ? '' : 'Password must be between 6 to 16 characters and must contain one number and one special character';\r\n                break;\r\n            case 'confirmPass':\r\n                error.confirmPass =dataPass.newPass != value? 'password and confirm password should match' : '';\r\n                break;\r\n        }\r\n        \r\n        \r\n        setDataPass({ ...dataPass, [name]: value })\r\n        console.log(dataPass)  \r\n        \r\n    }\r\n    const Eye = () => {\r\n        if (password == \"password\") {\r\n            setpassword(\"text\");\r\n            seteye(false);\r\n        }\r\n        else {\r\n            setpassword(\"password\");\r\n            seteye(true);\r\n        }\r\n    }\r\n    const newEyes = () => {\r\n        if (newPass == \"password\") {\r\n            setNewPass(\"text\");\r\n            setNewEye(false);\r\n        }\r\n        else {\r\n            setNewPass(\"password\");\r\n            setNewEye(true);\r\n        }\r\n    }\r\n    const confirmEyes = () => {\r\n        if (confirmPass == \"password\") {\r\n            setConfirmPass(\"text\");\r\n            setConfirmEye(false);\r\n        }\r\n        else {\r\n            setConfirmPass(\"password\");\r\n            setConfirmEye(true);\r\n        }\r\n    }\r\n    const submitPassword = (e) => {\r\n        if(data.password==undefined){\r\n            sweet.fire({\r\n                title:  'you do not have old password',\r\n                icon:\"warning\",\r\n                timer:2000\r\n              })\r\n        }\r\n        else if(dataPass.oldPass==''||dataPass.newPass==''||dataPass.confirmPass==''){\r\n            setShow(true)\r\n            setTimeout(() => {\r\n                setShow(false)\r\n            }, 3000);\r\n        }\r\n         \r\n        else if (bcrypt.compareSync(dataPass.oldPass, data.password) && error.oldPass==''&& error.newPass==''&& error.confirmPass=='') {\r\n            sweet.fire({\r\n                title:  `Your Password has been changed please login now`,\r\n                icon:\"success\",\r\n                timer:3000\r\n              })\r\n             \r\n            const saltRounds = 10;\r\n            const salt = bcrypt.genSaltSync(saltRounds);\r\n            const hash = bcrypt.hashSync(dataPass.newPass, salt);\r\n            console.log(JSON.parse(localStorage.getItem(\"cartData\")))\r\n            changePass({newPass:hash,id:data.id,cartData:JSON.parse(localStorage.getItem(\"cartData\"))})\r\n            localStorage.clear()\r\n            navigate('/login')\r\n            dispatch({type:\"logout\"})\r\n        }\r\n    }\r\n\r\n    return (\r\n\r\n        <div>\r\n            <div className=\"col-12\">\r\n                <h1>My Account</h1>\r\n\r\n            </div>\r\n            <hr />\r\n\r\n            <Container>\r\n            {show==true && <Alert severity=\"error\" className=\"fw-bold\" style={{fontSize:\"25px\"}}>All Fields are Required!!!</Alert>}\r\n                <Row>\r\n                    <Col sm={6}>\r\n\r\n\r\n                        <div className=\"container m-1\" >\r\n\r\n                            <div className=\"row\">\r\n                                <Account />\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                    </Col>\r\n\r\n\r\n                    <Col sm={6} >\r\n                        <Paper elevation={5} style={paperStyle} >\r\n                            <div className=\"container\">\r\n                                <div >\r\n                                    <div className=\"text\">\r\n                                        <h3>Change Password</h3>\r\n\r\n                                    </div>\r\n                                    <form  >\r\n\r\n                                        <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput2\">\r\n                                            <Form.Control type={password} placeholder=\" Old Password\" onChange={changeIt} name=\"oldPass\" required />\r\n                                            <div className='placeIconEye' style={{cursor:\"pointer\"}}>\r\n                                                <i onClick={Eye} className={`fa ${eye ? \"fa-eye-slash\" : \"fa-eye\"}`}></i>\r\n                                            </div>\r\n                                            <p className='text-danger'>{error.oldPass}</p>\r\n                                        </Form.Group>\r\n                                        <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput2\">\r\n                                            <Form.Control type={newPass} placeholder=\"New Password\" onChange={changeIt} name=\"newPass\" required />\r\n                                            <div className='placeIconEye' style={{cursor:\"pointer\"}}>\r\n                                                <i onClick={newEyes} className={`fa ${newEye ? \"fa-eye-slash\" : \"fa-eye\"}`}></i>\r\n                                            </div>\r\n                                            <p className='text-danger'>{error.newPass}</p>\r\n                                        </Form.Group>\r\n                                        <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput2\">\r\n                                            <Form.Control type={confirmPass} placeholder=\"Confirm Password\" onChange={changeIt} name=\"confirmPass\" required />\r\n                                            <div className='placeIconEye' style={{cursor:\"pointer\"}}>\r\n                                                <i onClick={confirmEyes} className={`fa ${confirmEye ? \"fa-eye-slash\" : \"fa-eye\"}`}></i>\r\n                                            </div>\r\n                                            <p className='text-danger'>{error.confirmPass}</p>\r\n                                        </Form.Group>\r\n\r\n                                        <Button className=\"text-black\" style={{ width: \"35%\", backgroundColor: \"grey\", border: \"none\" }} onClick={submitPassword}>Change Password</Button>\r\n\r\n\r\n                                    </form>\r\n                                </div>\r\n                            </div>\r\n                        </Paper>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChangePassword\r\n"]},"metadata":{},"sourceType":"module"}