{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Neosoft\\\\Desktop\\\\neostore for practice 3(j,s,a)\\\\amruta\\\\Neostore_Ecommerce_Website\\\\neostore-app\\\\src\\\\Components\\\\ForgotPassword.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from 'react';\nimport IconButton from '@mui/material/IconButton';\nimport Visibility from '@mui/icons-material/Visibility';\nimport VisibilityOff from '@mui/icons-material/VisibilityOff';\nimport { Form, Container, Button } from 'react-bootstrap';\nimport { getAll, otpSend, updatePassword } from '../configFiles/services';\nimport bcrypt from 'bcryptjs';\nimport { Alert } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport sweet from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst regForName = RegExp(/^[A-Za-z]{3,10}$/);\nconst regForUName = RegExp(/^[A-Za-z]{2,12}$/);\nconst regForEmail = RegExp(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/);\nconst regForPass = RegExp(/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/);\nconst RegForMobile = RegExp('^((\\\\+91-?)|0)?[0-9]{6}$');\n\nfunction ForgotPassword() {\n  _s();\n\n  const [flag, setFlag] = useState(0);\n  const [eye, seteye] = useState(true);\n  const [eyes, seteyes] = useState(true);\n  const [password, setpassword] = useState(\"password\");\n  const [passwords, setpasswords] = useState(\"password\");\n  const [otp, setOtp] = useState(0);\n  const [show, setShow] = useState(false);\n  const [shows, setShows] = useState(false);\n  const [data, setData] = useState({\n    emailAdd: '',\n    code: '',\n    pass: '',\n    cPass: ''\n  });\n  const [errors, setErrors] = useState({\n    emailAdd: '',\n    code: '',\n    pass: '',\n    cPass: ''\n  });\n  const navigate = useNavigate();\n\n  const Eye = () => {\n    if (password == \"password\") {\n      setpassword(\"text\");\n      seteye(false);\n    } else {\n      setpassword(\"password\");\n      seteye(true);\n    }\n  };\n\n  const Eyes = () => {\n    if (passwords == \"password\") {\n      setpasswords(\"text\");\n      seteyes(false);\n    } else {\n      setpasswords(\"password\");\n      seteyes(true);\n    }\n  };\n\n  const handler = event => {\n    const {\n      name,\n      value\n    } = event.target;\n\n    switch (name) {\n      case \"emailAdd\":\n        errors.emailAdd = regForEmail.test(value) ? '' : 'Email is invalid';\n\n      case 'code':\n        errors.code = RegForMobile.test(value) ? '' : 'OTP should be of 6 digits';\n        break;\n\n      case 'pass':\n        errors.pass = regForPass.test(value) ? '' : 'Password must be between 6 to 16 characters and must contain one number and one special character';\n        break;\n\n      case 'cPass':\n        errors.cPass = data.pass == value ? '' : 'password and confirm password should match';\n        break;\n    }\n\n    setData({ ...data,\n      [name]: value\n    });\n    console.log(data);\n  };\n\n  const sendOtp = () => {\n    if (data.emailAdd == '') {\n      setShows(true);\n      setTimeout(() => {\n        setShows(false);\n      }, 3000);\n    } else if (errors.emailAdd == '') {\n      const otp = Math.floor(100000 + Math.random() * 900000);\n      otpSend({\n        otp: otp,\n        email: data.emailAdd\n      }).then(res => {\n        console.log(res.data);\n\n        if (res.data.err == 1) {\n          alert(res.data.message);\n        } else {\n          setFlag(1);\n          setShow(true);\n          setTimeout(() => {\n            setShow(false);\n          }, 5000);\n          setOtp(res.data.otp);\n          localStorage.setItem(\"id\", res.data.id);\n          console.log(res.data.otp);\n        }\n      });\n    }\n  };\n\n  const submitPassword = () => {\n    const saltRounds = 10;\n    const myPlaintextPassword = data.pass;\n    const salt = bcrypt.genSaltSync(saltRounds);\n    const hash = bcrypt.hashSync(myPlaintextPassword, salt);\n\n    if (otp != data.code) {\n      sweet.fire({\n        title: 'Your OTP does not match',\n        icon: \"error\",\n        timer: 1000\n      });\n    } else if (otp == data.code && errors.code == '' && errors.pass == '' && errors.cPass == '') {\n      sweet.fire({\n        title: 'Your Password has been changed successfully please login now',\n        icon: \"success\",\n        timer: 1000\n      });\n      updatePassword({\n        password: hash,\n        id: localStorage.getItem(\"id\")\n      });\n      navigate('/login');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [show == true && /*#__PURE__*/_jsxDEV(Alert, {\n      className: \"fw-bold\",\n      style: {\n        fontSize: \"25px\"\n      },\n      children: \"OTP sent successfully! Please check your email id\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 30\n    }, this), shows == true && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      className: \"fw-bold\",\n      style: {\n        fontSize: \"25px\"\n      },\n      children: \"Please write your email Address\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 31\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"my-5 border\",\n      style: {\n        width: \"60%\",\n        backgroundColor: \"rgb(223, 223, 223)\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center\",\n        children: \"Recover Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Hey Enter your email id first\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"exampleForm.ControlInput2\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"email\",\n          validate: true,\n          placeholder: \"Email Address\",\n          className: \"py-2\",\n          onChange: handler,\n          name: \"emailAdd\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"placeIcon\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            width: \"16\",\n            height: \"16\",\n            fill: \"currentColor\",\n            class: \"bi bi-envelope-fill\",\n            viewBox: \"0 0 16 16\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 48\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-danger\",\n          children: errors.emailAdd\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: sendOtp,\n          className: \"text-black\",\n          style: {\n            width: \"15%\",\n            backgroundColor: \"grey\",\n            border: \"none\"\n          },\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this), flag == 1 && /*#__PURE__*/_jsxDEV(Form, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-5\",\n          controlId: \"exampleForm.ControlInput2\",\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"number\",\n            placeholder: \"Verification Code\",\n            name: \"code\",\n            onChange: handler,\n            className: \"py-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-danger\",\n          children: errors.code\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"exampleForm.ControlInput2\",\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: password,\n            placeholder: \"Password\",\n            className: \"py-2\",\n            name: \"pass\",\n            onChange: handler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"placeIcon\",\n          style: {\n            top: \"-54px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            onClick: Eye,\n            className: `fa ${eye ? \"fa-eye-slash\" : \"fa-eye\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-danger\",\n          children: errors.pass\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"exampleForm.ControlInput2\",\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: passwords,\n            placeholder: \"Confirm Password\",\n            className: \"py-2\",\n            name: \"cPass\",\n            onChange: handler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"placeIcon\",\n          style: {\n            top: \"-54px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            onClick: Eyes,\n            className: `fa ${eyes ? \"fa-eye-slash\" : \"fa-eye\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-danger\",\n          children: errors.cPass\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: submitPassword,\n          className: \"text-black\",\n          style: {\n            width: \"15%\",\n            backgroundColor: \"grey\",\n            border: \"none\"\n          },\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ForgotPassword, \"wf7GEHEfsjQvmpEc8QDA0asprdg=\", false, function () {\n  return [useNavigate];\n});\n\n_c = ForgotPassword;\nexport default ForgotPassword;\n\nvar _c;\n\n$RefreshReg$(_c, \"ForgotPassword\");","map":{"version":3,"sources":["C:/Users/Neosoft/Desktop/neostore for practice 3(j,s,a)/amruta/Neostore_Ecommerce_Website/neostore-app/src/Components/ForgotPassword.js"],"names":["React","useRef","useState","IconButton","Visibility","VisibilityOff","Form","Container","Button","getAll","otpSend","updatePassword","bcrypt","Alert","useNavigate","sweet","regForName","RegExp","regForUName","regForEmail","regForPass","RegForMobile","ForgotPassword","flag","setFlag","eye","seteye","eyes","seteyes","password","setpassword","passwords","setpasswords","otp","setOtp","show","setShow","shows","setShows","data","setData","emailAdd","code","pass","cPass","errors","setErrors","navigate","Eye","Eyes","handler","event","name","value","target","test","console","log","sendOtp","setTimeout","Math","floor","random","email","then","res","err","alert","message","localStorage","setItem","id","submitPassword","saltRounds","myPlaintextPassword","salt","genSaltSync","hash","hashSync","fire","title","icon","timer","getItem","fontSize","width","backgroundColor","border","top"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react'\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Visibility from '@mui/icons-material/Visibility';\r\nimport VisibilityOff from '@mui/icons-material/VisibilityOff';\r\nimport { Form, Container, Button } from 'react-bootstrap';\r\nimport { getAll, otpSend, updatePassword } from '../configFiles/services';\r\nimport bcrypt from 'bcryptjs';\r\nimport { Alert } from '@mui/material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport sweet from 'sweetalert2'\r\n\r\nconst regForName = RegExp(/^[A-Za-z]{3,10}$/);\r\nconst regForUName = RegExp(/^[A-Za-z]{2,12}$/);\r\nconst regForEmail = RegExp(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/);\r\nconst regForPass = RegExp(/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/);\r\nconst RegForMobile = RegExp('^((\\\\+91-?)|0)?[0-9]{6}$')\r\nfunction ForgotPassword() {\r\n\r\n    const [flag, setFlag] = useState(0);\r\n    const [eye, seteye] = useState(true);\r\n    const [eyes, seteyes] = useState(true);\r\n    const [password, setpassword] = useState(\"password\");\r\n    const [passwords, setpasswords] = useState(\"password\");\r\n    const [otp, setOtp] = useState(0);\r\n    const [show, setShow] = useState(false)\r\n    const [shows, setShows] = useState(false)\r\n    const [data, setData] = useState({\r\n        emailAdd: '',\r\n        code: '',\r\n        pass: '',\r\n        cPass: ''\r\n    })\r\n    const [errors, setErrors] = useState({\r\n        emailAdd: '',\r\n        code: '',\r\n        pass: '',\r\n        cPass: ''\r\n\r\n    })\r\n    const navigate = useNavigate()\r\n    const Eye = () => {\r\n        if (password == \"password\") {\r\n            setpassword(\"text\");\r\n            seteye(false);\r\n        }\r\n        else {\r\n            setpassword(\"password\");\r\n            seteye(true);\r\n        }\r\n    }\r\n    const Eyes = () => {\r\n        if (passwords == \"password\") {\r\n            setpasswords(\"text\");\r\n            seteyes(false);\r\n        }\r\n        else {\r\n            setpasswords(\"password\");\r\n            seteyes(true);\r\n        }\r\n    }\r\n    const handler = (event) => {\r\n        const { name, value } = event.target;\r\n        switch (name) {\r\n            case \"emailAdd\":\r\n                errors.emailAdd = regForEmail.test(value) ? '' : 'Email is invalid';\r\n            case 'code':\r\n                errors.code = RegForMobile.test(value) ? '' : 'OTP should be of 6 digits';\r\n                break;\r\n            case 'pass':\r\n                errors.pass = regForPass.test(value) ? '' : 'Password must be between 6 to 16 characters and must contain one number and one special character';\r\n                break;\r\n            case 'cPass':\r\n                errors.cPass = data.pass == value ? '' : 'password and confirm password should match';\r\n                break;\r\n\r\n        }\r\n\r\n        setData({ ...data, [name]: value })\r\n        console.log(data)\r\n    }\r\n    const sendOtp = () => {\r\n        if (data.emailAdd == '') {\r\n            setShows(true)\r\n            setTimeout(() => {\r\n                setShows(false)\r\n            }, 3000);\r\n        }\r\n        else if (errors.emailAdd == '') {\r\n            const otp = Math.floor(100000 + Math.random() * 900000)\r\n            otpSend({ otp: otp, email: data.emailAdd }).then(res => {\r\n                console.log(res.data)\r\n                if (res.data.err == 1) {\r\n                    alert(res.data.message)\r\n                }\r\n                else {\r\n                    setFlag(1)\r\n                    setShow(true)\r\n                    setTimeout(() => {\r\n                        setShow(false)\r\n                    }, 5000);\r\n                    setOtp(res.data.otp)\r\n                    localStorage.setItem(\"id\", res.data.id)\r\n                    console.log(res.data.otp)\r\n                }\r\n            })\r\n        }\r\n    }\r\n    const submitPassword = () => {\r\n        const saltRounds = 10;\r\n        const myPlaintextPassword = data.pass;\r\n        const salt = bcrypt.genSaltSync(saltRounds);\r\n        const hash = bcrypt.hashSync(myPlaintextPassword, salt);\r\n        if (otp != data.code) {\r\n            sweet.fire({\r\n                title: 'Your OTP does not match',\r\n                icon: \"error\",\r\n                timer: 1000\r\n            })\r\n        }\r\n        else if (otp == data.code && errors.code == '' && errors.pass == '' && errors.cPass == '') {\r\n\r\n            sweet.fire({\r\n                title: 'Your Password has been changed successfully please login now',\r\n                icon: \"success\",\r\n                timer: 1000\r\n            })\r\n            updatePassword({ password: hash, id: localStorage.getItem(\"id\") })\r\n            navigate('/login')\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            {show == true && <Alert className=\"fw-bold\" style={{ fontSize: \"25px\" }}>OTP sent successfully! Please check your email id</Alert>}\r\n            {shows == true && <Alert severity=\"error\" className=\"fw-bold\" style={{ fontSize: \"25px\" }}>Please write your email Address</Alert>}\r\n            <Container className='my-5 border' style={{ width: \"60%\", backgroundColor: \"rgb(223, 223, 223)\" }}>\r\n                <h1 className='text-center'>Recover Password</h1>\r\n                <hr />\r\n                <h1>Hey Enter your email id first</h1>\r\n                <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput2\">\r\n                    <Form.Control type=\"email\" validate placeholder=\"Email Address\" className='py-2' onChange={handler} name=\"emailAdd\" />\r\n                    <div className='placeIcon'><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-envelope-fill\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z\" />\r\n                    </svg></div>\r\n                    <p className='text-danger'>{errors.emailAdd}</p>\r\n                    <Button onClick={sendOtp} className=\"text-black\" style={{ width: \"15%\", backgroundColor: \"grey\", border: \"none\" }} >Submit</Button>\r\n\r\n                </Form.Group>\r\n\r\n                 {\r\n                    flag == 1 && \r\n                    <Form>\r\n                        <Form.Group className=\"mb-5\" controlId=\"exampleForm.ControlInput2\">\r\n                            <Form.Control type=\"number\" placeholder=\"Verification Code\" name=\"code\" onChange={handler} className='py-2' />\r\n                        </Form.Group>\r\n                        <p className='text-danger'>{errors.code}</p>\r\n\r\n                        <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput2\">\r\n                            <Form.Control type={password} placeholder=\"Password\" className='py-2' name=\"pass\" onChange={handler} />\r\n                        </Form.Group>\r\n                        <div className='placeIcon' style={{top:\"-54px\"}}>\r\n                            <i onClick={Eye} className={`fa ${eye ? \"fa-eye-slash\" : \"fa-eye\"}`}></i>\r\n                        </div>\r\n                        <p className='text-danger'>{errors.pass}</p>\r\n\r\n                        <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput2\">\r\n                            <Form.Control type={passwords} placeholder=\"Confirm Password\" className='py-2' name=\"cPass\" onChange={handler} />\r\n                        </Form.Group>\r\n                        <div className='placeIcon' style={{top:\"-54px\"}}>\r\n                            <i onClick={Eyes} className={`fa ${eyes ? \"fa-eye-slash\" : \"fa-eye\"}`}></i>\r\n                        </div>\r\n                        <p className='text-danger'>{errors.cPass}</p>\r\n                        <Button onClick={submitPassword} className=\"text-black\" style={{ width: \"15%\", backgroundColor: \"grey\", border: \"none\" }} >Submit</Button>\r\n\r\n                    </Form>\r\n                }\r\n\r\n            </Container>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ForgotPassword\r\n"]},"metadata":{},"sourceType":"module"}